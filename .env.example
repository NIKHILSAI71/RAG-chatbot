# Copy this to .env and fill secrets / adjust settings

# Gemini / Google GenAI
GEMINI_API_KEY=

# MySQL
MYSQL_HOST=127.0.0.1
MYSQL_USER=root
MYSQL_PASSWORD=
MYSQL_DB=
MYSQL_POOL_SIZE=16

# Pinecone
PINECONE_API_KEY=
PINECONE_INDEX=ragchat-index
PINECONE_CLOUD=aws
PINECONE_REGION=us-east-1

# Indexing
INDEX_COLUMNS=*            # comma separated table.column or * for auto-discover
# Optional: restrict indexing to specific tables (comma-separated)
# Use * to include all tables
INDEX_TABLES=
INDEX_AUTO_DISCOVER=true
CHUNK_CHARS=1200
MIN_CHUNK_CHARS=40
INDEX_ROW_LIMIT=50000
TEXT_TYPES=char,varchar,text,mediumtext,longtext,json,date,datetime,time,timestamp,year
COMBINE_ROW_COLUMNS=true
INCLUDE_COLUMN_NAMES=false
ALWAYS_INCLUDE_PATTERNS=
FULLTEXT_REQUIRED=false
EMBED_DIM=

# App behavior
AUTO_INDEX=true
AUTO_INDEX_INTERVAL=60
PREWARM_QUERIES=
STATUS_TIMEZONE=UTC
DEBUG_ERRORS=false

# Embeddings
EMBED_QUERY_CACHE_SIZE=256
EMBED_CONCURRENCY=4

# Metrics / Observability
METRICS_ENABLED=false
# Prometheus metrics endpoint exposed at /metrics when METRICS_ENABLED=true

# Circuit breaker
CB_FAIL_WINDOW=60
CB_MAX_FAILURES=5
CB_OPEN_SECONDS=30
CB_PERSIST=true
CB_STATE_FILE=./cb_state.json

# Tracing (OpenTelemetry)
TRACING_ENABLED=false
OTLP_ENDPOINT=
SERVICE_NAME=ragchat
TRACE_SAMPLE_RATIO=0.1
# Optional: add OTLP headers (e.g. Authorization=Bearer TOKEN)
OTEL_EXPORTER_OTLP_HEADERS=

# Runtime tuning
ROW_ENRICH=true
ROW_ENRICH_CHARS=600

# Chat concurrency (per-process)
CHAT_MAX_CONCURRENCY=8
CHAT_QUEUE_TIMEOUT_SECONDS=2.0

# Basic per-IP rate limiting
ENABLE_RATE_LIMIT=true
RATE_LIMIT_RPS=2
RATE_LIMIT_BURST=10

# Optional development overrides
PYTHONUNBUFFERED=1
